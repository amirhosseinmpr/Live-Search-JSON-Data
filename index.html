<!DOCTYPE html>
<html>
  <head>
    <title>Webslesson Tutorial | Search HTML Table Data by using JQuery</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
    />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
      #result {
        position: absolute;
        width: 63%;
        max-width: 70%;
        cursor: pointer;
        overflow-y: auto;
        max-height: 400px;
        box-sizing: border-box;
        z-index: 861;
        margin: 20px -15px;
        color: #000;
      }
      .link-class:hover {
        background-color: #f1f1f1;
      }
      .img-thumbnail {
        border-radius: 24px;
      }
    </style>
  </head>
  <body>
    <br /><br />
    <div
      class="container"
      style="width: 63%; background-color: #445bdb; color: white"
    >
      <h2>Live User Fillter</h2>
      <p>Search by name and/or loction</p>
      <br />
      <div align="center">
        <input
          type="text"
          name="search"
          id="search"
          placeholder="Search "
          class="form-control"
          style="
            background-color: #2f4098;
            border-radius: 22px;
            border: none;
            color: white;
          "
        />
      </div>
      <ul class="list-group" id="result"></ul>
      <br />
    </div>
  </body>
</html>

<script>
  $(document).ready(function () {
    $("#search").keyup(function () {
      $("#result").html("");
      $("#state").val("");
      var searchField = $("#search").val();
      var expression = new RegExp(searchField, "i");
      $.getJSON("data.json", function (data) {
        $.each(data, function (key, value) {
          if (
            value.name.search(expression) != -1 ||
            value.location.search(expression) != -1
          ) {
            $("#result").append(
              '<li class="list-group-item link-class"><img src="' +
                value.image +
                '" height="50" width="50" class="img-thumbnail" /> ' +
                value.name +
                ' | <span class="text-muted">' +
                value.location +
                "</span></li>"
            );
          }
        });
      });
    });
    var searchField = $("#search").val();
    if (!searchField.trim()) {
      return;
    }
    const peopleToShow = data.filter(({ name }) => pattern.test(name));
    if (peopleToShow.length === data.length) {
      return;
    }
    for (const value of peopleToShow) {
      $("#result").append(
        '<li class="list-group-item link-class"><img src="' +
          value.image +
          '" height="40" width="40" class="img-thumbnail" /> ' +
          value.name +
          ' | <span class="text-muted">' +
          value.location +
          "</span></li>"
      );
    }

    $("#result").on("click", "li", function () {
      var click_text = $(this).text().split("|");
      $("#search").val($.trim(click_text[0]));
      $("#result").html("");
    });
  });
</script>
